(this.webpackJsonpdoodle_integrated=this.webpackJsonpdoodle_integrated||[]).push([[0],{149:function(e,t,a){e.exports=a(199)},154:function(e,t,a){},155:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},184:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},199:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),l=a.n(o),c=(a(154),a(155),a(14)),s=a(15),i=a(17),u=a(16),d=a(18),m=a(279),p=a(239),h=a(116),v=a.n(h),f=a(55),E=a.n(f),g=a(248),b=a(275),y=a(130),S=a(4),O=a(105),C=a.n(O),D=a(107),k=a.n(D),j=a(108),N=a.n(j),w=a(112),I=a.n(w),M=a(109),x=a.n(M),_=a(110),P=a.n(_),L=a(238),U=a(237),A=a(106),T=a.n(A),J=a(5),R={success:C.a,warning:T.a,error:k.a,info:N.a};var z=Object(J.a)((function(e){return{success:{backgroundColor:x.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:P.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}}))((function(e){var t=e.classes,a=e.className,n=e.message,o=e.onClose,l=e.variant,c=Object(y.a)(e,["classes","className","message","onClose","variant"]),s=R[l];return r.a.createElement(U.a,Object.assign({className:Object(S.a)(t[l],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:Object(S.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(L.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(I.a,{className:t.icon}))]},c))})),B=a(77),F=a.n(B),H=a(113),V=a(8),W=a.n(V),G=a(114),q=a.n(G),Y=a(66),K=a.n(Y),Q=(a(179),K.a.initializeApp({apiKey:"AIzaSyAmcdm-nCXD4ahr4EwKddfHQ_vpqkMEPWA",authDomain:"cs180-schedulingapp.firebaseapp.com",databaseURL:"https://cs180-schedulingapp.firebaseio.com",projectId:"cs180-schedulingapp",storageBucket:"cs180-schedulingapp.appspot.com",messagingSenderId:"350264880268",appId:"1:350264880268:web:4fb4718431afc39b6e9fa9",measurementId:"G-DBB71H8E8J"}).firestore());K.a.storage();function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleEventRemove=function(e){var t=a.state.selectedIntervals,n=t.findIndex((function(t){return t.uid===e.uid}));n>-1&&(t.splice(n,1),a.setState({selectedIntervals:t}))},a.handleEventUpdate=function(e){var t=a.state.selectedIntervals,n=t.findIndex((function(t){return t.uid===e.uid}));n>-1&&(t[n]=e,a.setState({selectedIntervals:t}))},a.handleSelect=function(e){var t=a.state,n=t.lastUid,r=t.selectedIntervals,o=e.map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){Object(H.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{uid:n+t})}));a.setState({selectedIntervals:r.concat(o),lastUid:n+e.length}),console.log(r),a.props.parentMethod(o)},a.getCalendarStyle=function(){return{padding:"45px"}},a.state={lastUid:1,selectedIntervals:[]},a.displayCurrentEvents(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"displayCurrentEvents",value:function(){var e=this,t=[],a=0,n=JSON.parse(localStorage.getItem("currentUser"));Q.collection("events").where("owners","array-contains",n).onSnapshot((function(n){n.forEach((function(e){a++;var n={end:W()(e.data().endDate),start:W()(e.data().startDate),value:e.data().title,uid:a};t.push(n)})),e.setState({selectedIntervals:t})})),Q.collection("events").where("invitees","array-contains",n).onSnapshot((function(n){n.forEach((function(e){a++;var n={end:W()(e.data().endDate),start:W()(e.data().startDate),value:e.data().title,uid:a};t.push(n)})),e.setState({selectedIntervals:t})})),Q.collection("events").where("accepted_invitees","array-contains",n).onSnapshot((function(n){n.forEach((function(e){a++;var n={end:W()(e.data().endDate),start:W()(e.data().startDate),value:e.data().title,uid:a};t.push(n)})),e.setState({selectedIntervals:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{style:this.getCalendarStyle()},r.a.createElement(q.a,{dayFormat:"dddd, MM.DD",startTime:W()({h:8,m:0}),endTime:W()({h:20,m:50}),scaleFormat:"hh:mm a",numberOfDays:7,selectedIntervals:this.state.selectedIntervals,onIntervalSelect:this.handleSelect,onIntervalUpdate:this.handleEventUpdate,onIntervalRemove:this.handleEventRemove,useModal:!0}))}}]),t}(r.a.Component),$=(a(180),a(181),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeCalendar=function(e){a.setState({calendar:e})},a.onEventSubmitted=function(e){console.log(e[0].start.format()),console.log(W()(e[0].start.format()).format("LLLL"));var t=e[0].start.format(),n=e[0].end.format();a.setState({startDate:t,endDate:n}),localStorage.setItem("saved_start_date",JSON.stringify(t)),localStorage.setItem("saved_end_date",JSON.stringify(n))},a.renderCalendar=function(){return r.a.createElement("div",null,r.a.createElement("h3",{className:"text"},"Choose your time!"),r.a.createElement(Z,{parentMethod:function(e){return a.onEventSubmitted(e)}},a.props.children))},a.renderButtons=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"rightGroup"},r.a.createElement(L.a,{className:"button","aria-label":"back",onClick:a.props.goToFirstPage,color:"primary",size:"medium"},r.a.createElement(F.a,null)),r.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary",size:"large",onClick:function(e){return a.props.goToThirdPage(a.state.startDate,a.state.endDate,e)}},"Next")),r.a.createElement(p.a,{type:"button",className:"userCancelButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(E.a,null),onClick:a.props.cancelEvent},"Cancel"))},a.state={startDate:JSON.parse(localStorage.getItem("saved_start_date")),endDate:JSON.parse(localStorage.getItem("saved_end_date")),calendar:"default"},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){this.state.calendar;return r.a.createElement("div",null,this.renderCalendar(),this.renderButtons())}}]),t}(n.Component)),ee=a(246),te=a(273),ae=a(247),ne=a(21),re=a(242),oe=a(276),le=a(278),ce=a(241),se=a(245),ie=a(272),ue=a(240),de=Object(ue.a)({root:{textAlign:"center"}});function me(e){var t=de(),a=r.a.useState([]),o=Object(ne.a)(a,2),l=o[0],c=o[1],s=r.a.useState([]),i=Object(ne.a)(s,2),u=i[0],d=i[1];return Object(n.useEffect)((function(){console.log("1"),Q.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(e){if(e.exists){var t=e.data().contacts.map((function(e){return e.email}));d(t)}}))}),[]),Object(n.useEffect)((function(){console.log("2"),e.setSharedEvent(l)}),[l]),r.a.createElement("div",{className:t.root},r.a.createElement(ce.a,null,r.a.createElement(oe.a,{color:"primary",variant:"outlined",margin:"dense",id:"demo-mutiple-checkbox-label"},"Select Contacts to Invite"),r.a.createElement(ie.a,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,value:l,onChange:function(e){c(e.target.value),console.log(e.target.value)},input:r.a.createElement(re.a,null),renderValue:function(e){return e.join(", ")}},u.map((function(e){return r.a.createElement(le.a,{key:e,value:e},r.a.createElement(te.a,{checked:l.indexOf(e)>-1}),r.a.createElement(se.a,{primary:e}))})))))}a(182);var pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleCheckbox=function(){a.setState({checked:!a.state.checked})},a.renderOptions=function(){return r.a.createElement("div",null,r.a.createElement(ee.a,{className:"checkrow",row:!0},r.a.createElement(ae.a,{control:r.a.createElement(te.a,{checked:a.state.checked,value:a.state.checked,onChange:function(){return a.handleCheckbox()}}),label:"Make this event shareable"})),a.renderContactDropdown())},a.renderContactDropdown=function(){if(a.state.checked)return r.a.createElement(me,{setSharedEvent:function(e){return a.setSharedEvent(e)}})},a.setSharedEvent=function(e){a.setState({invite_list:e})},a.renderButtons=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"right"},r.a.createElement(L.a,{className:"button","aria-label":"back",onClick:a.props.goToSecondPage,color:"primary",size:"medium"},r.a.createElement(F.a,null)),r.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary",size:"large",onClick:function(e){return a.props.submitEvent(e,a.state.invite_list)}},"Submit Event")),r.a.createElement(p.a,{type:"button",className:"userCancelButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(E.a,null),onClick:a.props.cancelEvent},"Cancel"))},a.state={checked:!1,invite_list:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderOptions(),r.a.createElement("br",null),this.renderButtons())}}]),t}(n.Component),he=a(41),ve=a.n(he),fe=a(128),Ee=(a(184),Object.freeze({None:"None",Hobbies:"Hobbies",Social:"Social",Errands:"Errands",Projects:"Projects",Miscellaneous:"Miscellaneous"})),ge=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleErrorClose=function(e,t){"clickaway"!==t&&a.setState({errorMessageOpen:!1})},a.handleSuccessClose=function(e,t){"clickaway"!==t&&a.setState({successMessageOpen:!1})},a.handleTitle=function(e){a.setState({title:e.target.value})},a.handleDescription=function(e){a.setState({description:e.target.value})},a.onSubmitFirstPage=function(e){e.preventDefault(),""!==a.state.title&&null!==a.state.title?(localStorage.setItem("saved_title",JSON.stringify(a.state.title)),localStorage.setItem("saved_description",JSON.stringify(a.state.description)),localStorage.setItem("saved_category",JSON.stringify(a.state.category)),a.setState({firstPage:!1,secondPage:!0})):a.setState({errorMessageOpen:!0,message:"Please input a title!"})},a.goToFirstPage=function(){a.setState({firstPage:!0,secondPage:!1})},a.goToThirdPage=function(e,t,n){n.preventDefault(),null!==e&&""!==e&&null!==t&&""!==t?a.setState({startDate:e,endDate:t,firstPage:!1,secondPage:!1,thirdPage:!0}):a.setState({errorMessageOpen:!0,message:"Please input a date and time!"})},a.goToSecondPage=function(){a.setState({firstPage:!1,secondPage:!0,thirdPage:!1})},a.handleCategoryMenuClick=function(e){a.handleClose(),a.setState({category:e})},a.handleClose=function(){a.setState({anchorEl:null,openMenu:!a.state.openMenu})},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget,openMenu:!a.state.openMenu})},a.submitEvent=function(e,t){e.preventDefault();var n=a.makeCode(5),r=a.props,o=r.idOfEditEvent,l=r.editingEvent,c=ve.a.v4();if(l){var s=Q.batch();Q.collection("events").doc(o).get().then((function(e){if(0!==e.data().accepted_invitees.length)for(var t=0;t<e.data().accepted_invitees.length;t++){var n=ve.a.v4(),r=Q.collection("notifications").doc(n);s.set(r,{user:e.data().accepted_invitees[t],seen:!1,typeOf:3,eventTitle:a.state.title,id:n})}if(console.log(e.data()),0!==e.data().invitees.length)for(var o=0;o<e.data().invitees.length;o++){var l=ve.a.v4();r=Q.collection("notifications").doc(l);s.set(r,{user:e.data().invitees[o],seen:!1,typeOf:3,eventTitle:a.state.title,id:l})}s.commit()})).catch((function(e){return console.log(e)})),Q.collection("events").doc(o).update({title:a.state.title,description:a.state.description,category:a.state.category,startDate:a.state.startDate,endDate:a.state.endDate});t=t,p="yes",h=a.state.title,v=a.state.description,f=W()(a.state.startDate).format("LLLL")+" - "+W()(a.state.endDate).format("LT"),E=a.state.category;console.log("edit event"),console.log("invitees: "+t),console.log("emailEvent: "+h),console.log("emailDescription: "+v),console.log("emailStartDate: "+f),window.emailjs.send("gmail",p,{send_to:[t],subject:"An event has been edited!",emailEvent:h,emailDescription:v,emailStartDate:f,emailCategory:E}).then((function(e){console.log("Email successfully sent!")})).catch((function(e){return console.error("error: "+e)}))}else{var i=Q.batch();if(0!==t.length)for(var u=0;u<t.length;u++){var d=ve.a.v4(),m=Q.collection("notifications").doc(d);i.set(m,{user:t[u],seen:!1,typeOf:1,eventTitle:a.state.title,id:d})}i.commit(),Q.collection("events").doc(c).set({id:c,code:n,title:a.state.title,description:a.state.description,category:a.state.category,startDate:a.state.startDate,endDate:a.state.endDate,owners:a.state.owners,accepted_invitees:[],declined_invitees:[],invitees:t});var t=t,p="yes",h=a.state.title,v=a.state.description,f=W()(a.state.startDate).format("LLLL")+" - "+W()(a.state.endDate).format("LT"),E=a.state.category;console.log("add event"),console.log("invitees: "+t),console.log("emailEvent: "+h),console.log("emailDescription: "+v),console.log("emailStartDate: "+f),window.emailjs.send("gmail",p,{send_to:[t],subject:"An event has been created!",emailEvent:h,emailDescription:v,emailStartDate:f,emailCategory:E}).then((function(e){console.log("Email successfully sent!")})).catch((function(e){return console.error("error: "+e)}))}a.props.setHomePage()},a.makeCode=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},a.viewForm=function(){return a.state.firstPage?r.a.createElement("div",null,r.a.createElement(g.a,{className:"container",maxWidth:"md"},r.a.createElement("div",{className:"categoryBtn"},r.a.createElement(p.a,{variant:"contained",color:a.state.category!==Ee.None?"primary":"secondary","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return a.handleClick(e)}},a.state.category),r.a.createElement(fe.a,{id:"simple-menu",anchorEl:a.state.anchorEl,open:a.state.openMenu,onClose:a.handleClose},r.a.createElement(le.a,{onClick:function(){return a.handleCategoryMenuClick(Ee.Hobbies)}},Ee.Hobbies),r.a.createElement(le.a,{onClick:function(){return a.handleCategoryMenuClick(Ee.Social)}},Ee.Social),r.a.createElement(le.a,{onClick:function(){return a.handleCategoryMenuClick(Ee.Errands)}},Ee.Errands),r.a.createElement(le.a,{onClick:function(){return a.handleCategoryMenuClick(Ee.Projects)}},Ee.Projects),r.a.createElement(le.a,{onClick:function(){return a.handleCategoryMenuClick(Ee.Miscellaneous)}},Ee.Miscellaneous))),r.a.createElement("form",{className:"form",onSubmit:function(e){return a.onSubmitFirstPage(e)}},r.a.createElement(m.a,{type:"text",variant:"outlined",placeholder:"Event Name",fullWidth:!0,value:a.state.title,margin:"normal",onChange:function(e){return a.handleTitle(e)}}),r.a.createElement(m.a,{className:"form",type:"text",variant:"outlined",placeholder:"Event Description ... Optional",fullWidth:!0,value:a.state.description,margin:"normal",onChange:function(e){return a.handleDescription(e)}}),r.a.createElement("div",{className:"btnGroup"},r.a.createElement(p.a,{type:"button",className:"userCancelButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(E.a,null),onClick:a.props.cancelEvent},"Cancel"),r.a.createElement(p.a,{type:"submit",className:"userContinueButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(v.a,null),onClick:function(e){return a.onSubmitFirstPage(e)}},"Continue"))))):a.state.secondPage?r.a.createElement("div",null,r.a.createElement($,{cancelEvent:a.props.cancelEvent,goToFirstPage:function(){return a.goToFirstPage()},goToThirdPage:function(e,t,n){return a.goToThirdPage(e,t,n)}})):a.state.thirdPage?r.a.createElement("div",null,r.a.createElement(pe,{goToSecondPage:function(){return a.goToSecondPage()},cancelEvent:a.props.cancelEvent,submitEvent:function(e,t){return a.submitEvent(e,t)}})):void 0},a.state={title:JSON.parse(localStorage.getItem("saved_title"))||"",description:JSON.parse(localStorage.getItem("saved_description"))||"",startDate:JSON.parse(localStorage.getItem("saved_start_date"))||"",endDate:JSON.parse(localStorage.getItem("saved_end_date"))||"",category:JSON.parse(localStorage.getItem("saved_category"))||Ee.None,calendar:"default",firstPage:!0,secondPage:!1,thirdPage:!1,owners:[JSON.parse(localStorage.getItem("currentUser"))],shared:!1,invitees:[],errorMessageOpen:!1,message:"",successMessageOpen:!1,anchorEl:null,openMenu:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.viewForm(),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.errorMessageOpen,autoHideDuration:6e3,onClose:this.handleErrorClose},r.a.createElement(z,{onClose:this.handleErrorClose,variant:"error",message:this.state.message})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.successMessageOpen,autoHideDuration:6e3,onClose:this.handleSuccessClose},r.a.createElement(z,{onClose:this.handleSuccessClose,variant:"success",message:"New event has been created"})))}}]),t}(n.Component),be=(a(185),a(67)),ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={contentList:[],emailList:[]},a.handleChange=a.handleChange.bind(Object(be.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(be.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Q.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(t){t.exists&&e.setState({emailList:t.data().contacts,contentList:t.data().events})}))}},{key:"render",value:function(){return r.a.createElement("form",{className:"test-mailing"},r.a.createElement("h1",null,"Let's see if it works"),r.a.createElement("div",null,r.a.createElement("textarea",{id:"test-mailing",name:"test-mailing",onChange:this.handleChange,placeholder:"Send event",required:!0,value:this.state.feedback,style:{width:"100%",height:"150px"}})),r.a.createElement("input",{type:"button",value:"Submit",className:"btn btn--submit",onClick:this.handleSubmit}))}},{key:"handleChange",value:function(e){this.setState({feedback:e.target.value})}},{key:"handleSubmit",value:function(e){this.sendFeedback("yes",{message_html:this.state.feedback,from_name:this.state.name,reply_to:this.state.email}),this.props.handleDisplay()}},{key:"sendFeedback",value:function(e,t){window.emailjs.send("gmail",e,{send_to:this.state.emailList,content:this.state.contentList}).then((function(e){console.log("Email successfully sent!"),console.log(t)})).catch((function(e){return console.error("Oh well, you failed. Here some thoughts on the error that occured:",e)}))}}]),t}(r.a.Component),Se=a(254),Oe=a(256),Ce=a(255),De=a(121),ke=a.n(De),je=a(48),Ne=a(120),we=a.n(Ne),Ie=a(119),Me=a.n(Ie),xe=a(257),_e=a(51),Pe=a.n(_e),Le=a(118),Ue=a.n(Le),Ae=a(117),Te=a.n(Ae),Je=a(129),Re=a(274),ze=a(252),Be=a(251),Fe=a(250),He=a(249),Ve=r.a.forwardRef((function(e,t){return r.a.createElement(He.a,Object.assign({direction:"up",ref:t},e))}));function We(e){var t=r.a.useState(e.open),a=Object(ne.a)(t,2),o=a[0],l=a[1],c=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),s=Object(ne.a)(c,1)[0],i=r.a.useState([]),u=Object(ne.a)(i,2),d=u[0],m=u[1],h=r.a.useState([]),v=Object(ne.a)(h,2),f=v[0],E=v[1],g=r.a.useState([]),b=Object(ne.a)(g,2),y=b[0],S=b[1],O=r.a.useState(!1),C=Object(ne.a)(O,2),D=C[0],k=C[1],j=function(){var t=f.filter((function(e){return!d.includes(e)})),a=Q.batch();if(0!==t.length)for(var n=0;n<t.length;n++){var r=ve.a.v4(),o=Q.collection("notifications").doc(r);a.set(o,{user:t[n],seen:!1,typeOf:1,eventTitle:e.title,id:r})}a.commit(),l(!1)};return Object(n.useEffect)((function(){Q.collection("users").doc(s).get().then((function(e){if(e.exists){var t=e.data().contacts.map((function(e){return e.email}));S(t)}})),Q.collection("events").doc(e.id).get().then((function(e){E(e.data().invitees),m(e.data().invitees),k(!0)}))}),[]),Object(n.useEffect)((function(){D&&Q.collection("events").doc(e.id).update({invitees:f})}),[f]),r.a.createElement("div",null,r.a.createElement(Re.a,{open:o,TransitionComponent:Ve,keepMounted:!0,onClose:j,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Fe.a,null,"Invite More"),r.a.createElement(Be.a,null,y.map((function(e){return r.a.createElement(le.a,{key:e,value:e},r.a.createElement(te.a,{checked:f.indexOf(e)>-1,onChange:function(){return t=e,void(f.includes(t)?E(f.filter((function(e){return e!==t}))):E([].concat(Object(Je.a)(f),[t])));var t}}),r.a.createElement(se.a,{primary:e}))}))),r.a.createElement(ze.a,null,r.a.createElement(p.a,{onClick:j,color:"primary"},"Close"))))}var Ge=a(253),qe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleShareEvent=function(){a.setState({startShare:!a.state.startShare})},a.state={expanded:!1,startShare:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.isShared,o=t.hasAccepted,l=a.invitees.map((function(e){return r.a.createElement("li",null,e,"\n")})),c=a.accepted_invitees.map((function(e){return r.a.createElement("li",null,e,"\n")})),s=a.declined_invitees.map((function(e){return r.a.createElement("li",null,e,"\n")})),i=a.owners.map((function(e){return r.a.createElement("li",null,e,"\n")})),u=(a.invitees&&a.invitees.join("\n"),n?"Shared event":"Made by me"),d=this.state.startShare?r.a.createElement(We,{id:a.id,open:this.state.startShare,title:a.title}):null,m=n?null:r.a.createElement(p.a,{size:"small",color:"primary",onClick:function(){return e.props.editEvent(a.id)}},"edit"),h=n?null:r.a.createElement(L.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.props.deleteEvent(a.id)}},r.a.createElement(Pe.a,null)),v=n&&!o?r.a.createElement("div",null,r.a.createElement(L.a,{onClick:function(){return e.props.acceptInvite(a.id)}},r.a.createElement(Te.a,{style:{color:Ge.a[500]}})),r.a.createElement(L.a,{onClick:function(){return e.props.declineInvite(a.id)}},r.a.createElement(Ue.a,{color:"secondary"}))):null;return r.a.createElement("div",null,r.a.createElement(Se.a,null,r.a.createElement(Ce.a,null,r.a.createElement(je.a,{variant:"h6",component:"h2",color:"primary"},a.category),r.a.createElement(je.a,{color:"textSecondary",gutterBottom:!0},u),r.a.createElement(je.a,{variant:"h5",component:"h2"},a.title),r.a.createElement(je.a,null,a.description),r.a.createElement(je.a,null,W()(a.startDate).format("LLLL")+" - "+W()(a.endDate).format("LT"))),r.a.createElement(Oe.a,null,m,r.a.createElement(L.a,{"aria-label":"share",onClick:function(){return e.handleShareEvent()}},r.a.createElement(Me.a,{color:"primary"})),h,r.a.createElement(L.a,{onClick:function(){e.setState({expanded:!e.state.expanded})},"aria-expanded":this.state.expanded,"aria-label":"show more"},r.a.createElement(we.a,null)),v),r.a.createElement(xe.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{data:[{title:"People confirmed going",value:a.owners.length+a.accepted_invitees.length,color:"#00e676"},{title:"People who might go",value:a.invitees.length,color:"#fff59d"},{title:"People who won't go",value:a.declined_invitees.length,color:"#78909c"}],radius:50,style:{height:"125px",marginBottom:"2em",marginTop:"0",display:"flex"}}),r.a.createElement(je.a,null,"Owners: ",r.a.createElement("ul",{style:{listStyleType:"none"}},i),"Invitees: ",r.a.createElement("ul",{style:{listStyleType:"none"}},l),"Accepted Invitees: ",r.a.createElement("ul",{style:{listStyleType:"none"}},c),"Declined Invitees: ",r.a.createElement("ul",{style:{listStyleType:"none"}},s)),r.a.createElement(je.a,{color:"primary",gutterBottom:"true"},"Invite Code: ",a.code)))),d)}}]),t}(n.Component),Ye=a(131),Ke=a(258),Qe=a(270),Xe=a(259),Ze=a(260),$e=a(261),et=a(262),tt=a(263),at=a(264),nt=a(265),rt=a(266),ot=a(280),lt=(a(186),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClose=function(e){a.props.onClose&&a.props.onClose(e)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(!this.props.show)return null;var e="";console.log(this.props.calendarEventDayData.events);for(var t=0;t<this.props.calendarEventDayData.events.length;++t){e+=W()(this.props.calendarEventDayData.events[t].startDate).format("LT")+" - "+W()(this.props.calendarEventDayData.events[t].endDate).format("LT")+": "+this.props.calendarEventDayData.events[t].title+"\n"+this.props.calendarEventDayData.events[t].description+"\n"}return r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement("h2",null,W()(this.props.calendarEventDayData.date).format("dddd L")),r.a.createElement("div",{className:"content"},e.split("\n").map((function(e,t){return r.a.createElement("div",{key:t},e)}))),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"toggle-button",onClick:this.onClose},"close")))}}]),t}(r.a.Component)),ct=(a(187),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).showModal=function(e){a.calendarEventDayData=e,a.setState({show:!a.state.show,calendarEventDayData:a.calendarEventDayData})},a.onDateClick=function(e){a.setState({selectedDate:"day"})},a.nextMonth=function(){a.setState({currentMonth:Ye.a(a.state.currentMonth,1)})},a.prevMonth=function(){a.setState({currentMonth:Ke.a(a.state.currentMonth,1)})},a.state={currentMonth:new Date,selectedDate:null,show:!1,title:"",calendarEventDayData:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"compareEventStartDates",value:function(e,t){return W()(e.startDate).valueOf()<W()(t.startDate).valueOf()?-1:W()(e.startDate).valueOf()>W()(t.startDate).valueOf()?1:0}},{key:"renderHeader",value:function(){return r.a.createElement("div",{className:"header row flex-middle"},r.a.createElement("div",{className:"col col-start"},r.a.createElement("div",{className:"icon",onClick:this.prevMonth},"chevron_left")),r.a.createElement("div",{className:"col col-center"},r.a.createElement("span",null,Qe.a(this.state.currentMonth,"MMMM yyyy"))),r.a.createElement("div",{className:"col col-end",onClick:this.nextMonth},r.a.createElement("div",{className:"icon"},"chevron_right")))}},{key:"renderDays",value:function(){for(var e=[],t=Xe.a(this.state.currentMonth),a=0;a<7;a++)e.push(r.a.createElement("div",{className:"col col-center",key:a},Qe.a(Ze.a(t,a),"iiii")));return r.a.createElement("div",{className:"days row"},e)}},{key:"renderCells",value:function(){var e=this,t=!(null===this.props.events||void 0===this.props.events||0===this.props.events.length),a=!(null===this.props.sharedEvents||void 0===this.props.sharedEvents||0===this.props.sharedEvents.length),n=!(null===this.props.acceptedEvents||void 0===this.props.acceptedEvents||0===this.props.acceptedEvents.length);if(t||a||n){var o,l,c,s,i,u,d,m,p,h,v=function(){var v=e.state,f=v.currentMonth,E=v.selectedDate,g=$e.a(f),b=et.a(g),y=Xe.a(g),S=tt.a(b),O=[],C=[],D=y,k="",j=[];if(t)for(var N=0;N<e.props.events.length;++N)W()(e.props.events[N].startDate).format("L").split("/")[0]==at.a(f)+1&&(o={date:e.props.events[N].date,title:e.props.events[N].title,description:e.props.events[N].description,startDate:e.props.events[N].startDate,endDate:e.props.events[N].endDate},j.push(o));if(a)for(var w=0;w<e.props.sharedEvents.length;++w)W()(e.props.sharedEvents[w].startDate).format("L").split("/")[0]==at.a(f)+1&&(o={date:e.props.sharedEvents[w].date,title:e.props.sharedEvents[w].title,description:e.props.sharedEvents[w].description,startDate:e.props.sharedEvents[w].startDate,endDate:e.props.sharedEvents[w].endDate},j.push(o));if(n)for(var I=0;I<e.props.acceptedEvents.length;++I)W()(e.props.acceptedEvents[I].startDate).format("L").split("/")[0]==at.a(f)+1&&(o={date:e.props.acceptedEvents[I].date,title:e.props.acceptedEvents[I].title,description:e.props.acceptedEvents[I].description,startDate:e.props.acceptedEvents[I].startDate,endDate:e.props.acceptedEvents[I].endDate},j.push(o));for(var M=[],x=0;x<j.length;++x){l=!1,c=W()(j[x].startDate).format("L"),s={title:j[x].title,description:j[x].description,startDate:j[x].startDate,endDate:j[x].endDate};for(var _=0;_<M.length&&!l;++_)M[_].date===c&&(l=!0,M[_].events.push(s));l||(i={date:c,events:[s]},M.push(i))}for(var P=0;P<M.length;++P)M[P].events.sort(e.compareEventStartDates);for(;D<=S;){for(var L=0;L<7;L++){k=Qe.a(D,"d"),u=!1;for(var U=function(t){d=M[t].date.split("/")[1].replace(/^0+/,""),m=M[t].date.split("/")[0].replace(/^0+/,""),d==nt.a(D).toString()&&m==at.a(D)+1&&(M[t].events.length>1?(p=(M[t].events[0].title+" +"+(M[t].events.length-1)).toString(),console.log(p),C.push(r.a.createElement("div",{className:"col cell ".concat(rt.a(D,g)?ot.a(D,E)?"selected":"":"disabled"),key:D,onClick:function(a){e.showModal(M[t])}},r.a.createElement("span",{className:"number"},k),r.a.createElement("span",{className:"bg"},k),r.a.createElement("span",{className:"title"},p)))):(h=M[t].events[0].title.toString(),console.log(h),C.push(r.a.createElement("div",{className:"col cell ".concat(rt.a(D,g)?ot.a(D,E)?"selected":"":"disabled"),key:D,onClick:function(a){e.showModal(M[t])}},r.a.createElement("span",{className:"number"},k),r.a.createElement("span",{className:"bg"},k),r.a.createElement("span",{className:"title"},h)))),u=!0)},A=0;A<M.length&&!u;++A)U(A);u||C.push(r.a.createElement("div",{className:"col cell ".concat(rt.a(D,g)?ot.a(D,E)?"selected":"":"disabled"),key:D},r.a.createElement("span",{className:"number"},k),r.a.createElement("span",{className:"bg"},k))),D=Ze.a(D,1)}O.push(r.a.createElement("div",{className:"row",key:D},C)),C=[]}return{v:r.a.createElement("div",{className:"body"},O)}}();if("object"===typeof v)return v.v}}},{key:"render",value:function(){return r.a.createElement("div",{id:"parent"},r.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells()),r.a.createElement("div",{className:"modal"},r.a.createElement(lt,{onClose:this.showModal,show:this.state.show,calendarEventDayData:this.calendarEventDayData})))}}]),t}(r.a.Component)),st=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).sendEmail=function(){a.setState({showForm:!0})},a.switchEventView=function(){a.setState({showShared:!a.state.showShared})},a.setEventOrder=function(e){a.handleClose3(),a.setState({eventSortOrder:e})},a.viewForm=function(){return"events"===a.state.showShared?r.a.createElement("div",null,a.showEvents()):"shared"===a.state.showShared?r.a.createElement("div",null,a.showSharedEvents()):"accepted"===a.state.showShared?r.a.createElement("div",null,a.showAcceptedEvents()):"calendar"===a.state.showShared?r.a.createElement("div",null,a.showCalendar()):void 0},a.showEvents=function(){var e=[];switch(e=a.isSearching()?a.state.filteredEvents:a.state.events,a.state.eventSortOrder){case"ascending":e.sort(a.compareEventStartDatesAscending);break;case"descending":e.sort(a.compareEventStartDatesDescending);break;case"category":e.sort(a.compareEventCategory)}return a.areThereNoEvents()?r.a.createElement("h2",null,"No events"):e.map((function(e,t){return r.a.createElement(g.a,{maxWidth:"xl"},r.a.createElement(qe,{key:t,data:e,editEvent:function(e){return a.props.editEvent(e)},deleteEvent:function(e){return a.deleteEvent(e)}}))}))},a.showSharedEvents=function(){var e=[];switch(e=a.isSearching()?a.state.filteredSharedEvents:a.state.sharedEvents,a.state.eventSortOrder){case"ascending":e.sort(a.compareEventStartDatesAscending);break;case"descending":e.sort(a.compareEventStartDatesDescending);break;case"category":e.sort(a.compareEventCategory)}return a.areThereNoSharedEvents()?r.a.createElement("h2",null,"No shared events"):(console.log(),e.map((function(e,t){return r.a.createElement(g.a,{maxWidth:"xl"},r.a.createElement(qe,{key:t,data:e,isShared:!0,hasAccepted:!1,acceptInvite:function(e){return a.acceptInvite(e)},declineInvite:function(e){return a.declineInvite(e)}}))})))},a.showAcceptedEvents=function(){var e=[];switch(e=a.isSearching()?a.state.filteredAcceptedEvents:a.state.acceptedEvents,a.state.eventSortOrder){case"ascending":e.sort(a.compareEventStartDatesAscending);break;case"descending":e.sort(a.compareEventStartDatesDescending);break;case"category":e.sort(a.compareEventCategory)}return a.areNoAcceptedEvents()?r.a.createElement("h2",null,"No accepted events"):e.map((function(e,t){return r.a.createElement(g.a,{maxWidth:"xl"},r.a.createElement(qe,{key:t,data:e,isShared:!0,hasAccepted:!0}))}))},a.showCalendar=function(){var e=a.state.events,t=a.state,n=t.sharedEvents,o=t.acceptedEvents;return a.areThereNoEvents()&&a.areThereNoSharedEvents()&&a.areNoAcceptedEvents()?r.a.createElement("h2",null,"There are no events to be displayed"):r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement(ct,{events:e,sharedEvents:n,acceptedEvents:o})))},a.handleSearch=function(e){a.setState({search:e.target.value,filteredEvents:a.filterEvents(a.state.events),filteredSharedEvents:a.filterEvents(a.state.sharedEvents),filteredAcceptedEvents:a.filterEvents(a.state.acceptedEvents)})},a.filterEvents=function(e){for(var t=[],n=0;n<e.length;n++){var r=a.state.search.toLowerCase();(e[n].title.toLowerCase().includes(r)||e[n].category.toLowerCase().includes(r)||e[n].description.toLowerCase().includes(r)||W()(e[n].startDate).format("LLLL").toLowerCase().includes(r))&&t.push(e[n])}return t},a.getMainStyle=function(){return{textAlign:"center",padding:"5px",background:"#fff"}},a.getBtnStyle=function(){return{textAlign:"right",padding:"10px",background:"#fff"}},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget,openMenu:!a.state.openMenu})},a.handleAddEventMenu=function(){a.handleClose(),a.props.beginAddEvent()},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget,openMenu:!a.state.openMenu})},a.handleClick2=function(e){a.setState({anchorEl2:e.currentTarget,openMenu2:!a.state.openMenu2})},a.handleClick3=function(e){a.setState({anchorEl3:e.currentTarget,openMenu3:!a.state.openMenu3})},a.handleClose=function(){a.setState({anchorEl:null,openMenu:!a.state.openMenu})},a.handleClose2=function(){a.setState({anchorEl2:null,openMenu2:!a.state.openMenu2})},a.handleClose3=function(){a.setState({anchorEl3:null,openMenu3:!a.state.openMenu3})},a.handleJoinEventMenu=function(){a.handleClose(),a.props.beginJoinEvent()},a.deleteEvent=function(e){var t=Q.batch();Q.collection("events").doc(e).get().then((function(n){if(n.data().accepted_invitees)for(var r=0;r<n.data().accepted_invitees.length;r++){var o=ve.a.v4(),l=Q.collection("notifications").doc(o);t.set(l,{user:n.data().accepted_invitees[r],seen:!1,typeOf:2,eventTitle:n.data().title,id:o})}if(n.data().invitees)for(var c=0;c<n.data().invitees.length;c++){var s=ve.a.v4();l=Q.collection("notifications").doc(s);t.set(l,{user:n.data().invitees[c],seen:!1,typeOf:2,eventTitle:n.data().title,id:s})}t.commit(),a.state.events.find((function(t){if(t.id===e){var a=t.invitees,n=t.title,r=t.description,o=W()(t.startDate).format("LLLL")+" - "+W()(t.endDate).format("LT");console.log("event categories: "+t.categories);var l=t.category;console.log("delete event"),console.log("invitees: "+a),console.log("emailEvent: "+n),console.log("emailDescription: "+r),console.log("emailStartDate: "+o),window.emailjs.send("gmail","yes",{send_to:[a],subject:"An event has been deleted!",emailEvent:n,emailDescription:r,emailStartDate:o,emailCategory:l}).then((function(t){console.log("Email successfully sent!"),Q.collection("events").doc(e).delete()})).catch(Q.collection("events").doc(e).delete())}}))})).catch((function(e){return console.log(e)}))},a.acceptInvite=function(e){var t=Q.collection("events").doc(e);t.update({invitees:K.a.firestore.FieldValue.arrayRemove(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)})),t.update({accepted_invitees:K.a.firestore.FieldValue.arrayUnion(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)}))},a.declineInvite=function(e){var t=Q.collection("events").doc(e);t.update({invitees:K.a.firestore.FieldValue.arrayRemove(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)})),t.update({declined_invitees:K.a.firestore.FieldValue.arrayUnion(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)}))},a.handleDisplay=function(){a.setState({showForm:!1})},a.handleMenuClick=function(e){a.handleClose2(),a.setState({showShared:e})},a.state={anchorEl:null,openMenu:!1,anchorEl2:null,openMenu2:!1,anchorEl3:null,openMenu3:!1,showForm:!1,showShared:"events",events:[],sharedEvents:[],acceptedEvents:[],filteredEvents:[],filteredSharedEvents:[],filteredAcceptedEvents:[],eventSortOrder:"descending",search:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"areThereNoEvents",value:function(){return null===this.state.events||void 0===this.state.events||0===this.state.events.length}},{key:"areThereNoSharedEvents",value:function(){return null===this.state.sharedEvents||void 0===this.state.sharedEvents||0===this.state.sharedEvents.length}},{key:"areNoAcceptedEvents",value:function(){return null===this.state.acceptedEvents||void 0===this.state.acceptedEvents||0===this.state.acceptedEvents.length}},{key:"isSearching",value:function(){return""!=this.state.search}},{key:"compareEventStartDatesAscending",value:function(e,t){return W()(e.startDate).valueOf()<W()(t.startDate).valueOf()?-1:W()(e.startDate).valueOf()>W()(t.startDate).valueOf()?1:0}},{key:"compareEventStartDatesDescending",value:function(e,t){return W()(e.startDate).valueOf()<W()(t.startDate).valueOf()?1:W()(e.startDate).valueOf()>W()(t.startDate).valueOf()?-1:0}},{key:"compareEventCategory",value:function(e,t){var a={};return a[Ee.None]=0,a[Ee.Hobbies]=1,a[Ee.Social]=2,a[Ee.Errands]=3,a[Ee.Projects]=4,a[Ee.Hobbies]=5,a[e.category]<a[t.category]?-1:a[e.category]>a[t.category]?1:0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.showForm&&r.a.createElement("div",null,r.a.createElement(ye,{handleDisplay:this.handleDisplay})),r.a.createElement("div",{style:this.getBtnStyle()},r.a.createElement(p.a,{variant:"contained",color:"primary","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(t){return e.handleClick(t)}},"Create/Join Event"),r.a.createElement(fe.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:this.state.openMenu,onClose:this.handleClose},r.a.createElement(le.a,{onClick:this.handleAddEventMenu},"Create Event"),r.a.createElement(le.a,{onClick:this.handleJoinEventMenu},"Join Event"))),r.a.createElement("div",{style:this.getBtnStyle()},r.a.createElement(p.a,{variant:"contained",color:"primary","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(t){return e.handleClick3(t)}},"Sort Event"),r.a.createElement(fe.a,{id:"simple-menu",anchorEl:this.state.anchorEl3,open:this.state.openMenu3,onClose:this.handleClose3},r.a.createElement(le.a,{onClick:function(){return e.setEventOrder("descending")}},"Latest"),r.a.createElement(le.a,{onClick:function(){return e.setEventOrder("ascending")}},"Earliest"),r.a.createElement(le.a,{onClick:function(){return e.setEventOrder("category")}},"Category"))),r.a.createElement(m.a,{type:"text",variant:"outlined",inputProps:{style:{textAlign:"center"}},placeholder:"Search for title, description, category, date..",fullWidth:!0,value:this.state.search,margin:"normal",onChange:function(t){return e.handleSearch(t)}}),r.a.createElement("div",{style:this.getMainStyle()},r.a.createElement(p.a,{color:"secondary",variant:"outlined",onClick:function(t){return e.handleClick2(t)}},"Switch"),r.a.createElement(fe.a,{id:"simple-menu-sort",anchorEl:this.state.anchorEl2,open:this.state.openMenu2,onClose:this.handleClose2},r.a.createElement(le.a,{onClick:function(){return e.handleMenuClick("events")}},"Show Own Events"),r.a.createElement(le.a,{onClick:function(){return e.handleMenuClick("shared")}},"Show New Event Invites"),r.a.createElement(le.a,{onClick:function(){return e.handleMenuClick("accepted")}},"Show Accepted Events"),r.a.createElement(le.a,{onClick:function(){return e.handleMenuClick("calendar")}},"Show Event Calendar")),this.viewForm()))}},{key:"componentDidMount",value:function(){var e=this,t={temp:[]},a=JSON.parse(localStorage.getItem("currentUser"));this.unsubscribe1=Q.collection("events").where("owners","array-contains",a).onSnapshot((function(a){t.temp=[],a.forEach((function(e){t.temp.push(e.data())})),e.setState({events:t.temp})})),this.unsubscribe2=Q.collection("events").where("invitees","array-contains",a).onSnapshot((function(a){t.temp=[],a.forEach((function(e){console.log("2"),t.temp.push(e.data())})),e.setState({sharedEvents:t.temp})})),this.unsubscribe3=Q.collection("events").where("accepted_invitees","array-contains",a).onSnapshot((function(a){t.temp=[],a.forEach((function(e){console.log("3"),t.temp.push(e.data())})),e.setState({acceptedEvents:t.temp})}))}},{key:"componentWillUnmount",value:function(){console.log("unsub"),this.unsubscribe1(),this.unsubscribe2(),this.unsubscribe3()}}]),t}(n.Component),it=a(267);function ut(){var e=r.a.useState(!1),t=Object(ne.a)(e,2),a=t[0],n=t[1],o=r.a.useState(""),l=Object(ne.a)(o,2),c=l[0],s=l[1],i=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),u=Object(ne.a)(i,1)[0],d=r.a.useState(!1),h=Object(ne.a)(d,2),v=h[0],f=h[1],E=r.a.useState(!1),g=Object(ne.a)(E,2),y=g[0],S=g[1],O=r.a.useState(""),C=Object(ne.a)(O,2),D=C[0],k=C[1],j=function(){n(!1)},N=function(e,t){"clickaway"!==t&&f(!1)},w=function(e,t){"clickaway"!==t&&S(!1)};return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",onClick:function(){n(!0)}},"Add Contact")),r.a.createElement(Re.a,{open:a,onClose:j,"aria-labelledby":"form-dialog-title"},r.a.createElement(Fe.a,{id:"form-dialog-title"},"Adding Contact"),r.a.createElement(Be.a,null,r.a.createElement(it.a,null,"To add a contact, please enter their email address."),r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){s(e.target.value)}})),r.a.createElement(ze.a,null,r.a.createElement(p.a,{onClick:j,color:"primary"},"Cancel"),r.a.createElement(p.a,{onClick:function(){""!==c?Q.collection("users").doc(c).get().then((function(e){e.exists?Q.collection("users").doc(u).get().then((function(t){var a=t.data().contacts.filter((function(e){return e.email!==c}));Q.collection("users").doc(u).update({contacts:a}),Q.collection("users").doc(u).update({contacts:K.a.firestore.FieldValue.arrayUnion({displayName:e.data().displayName,email:c,pictureURL:e.data().pictureURL})}),j(),S(!0),k("Successfully added contact!")})):(f(!0),k("Invalid contact!"))})).catch((function(e){console.log("handleDeleteContact: Error getting document",e)})):(f(!0),k("Invalid contact!"))},color:"primary"},"Enter"))),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:v,autoHideDuration:6e3,onClose:N},r.a.createElement(z,{onClose:N,variant:"error",message:D})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:y,autoHideDuration:6e3,onClose:w},r.a.createElement(z,{onClose:w,variant:"success",message:D})))}var dt=a(34),mt=r.a.forwardRef((function(e,t){return r.a.createElement(He.a,Object.assign({direction:"up",ref:t},e))}));function pt(){var e=r.a.useState(!1),t=Object(ne.a)(e,2),a=t[0],o=t[1],l=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),c=Object(ne.a)(l,1)[0],s=r.a.useState([]),i=Object(ne.a)(s,2),u=i[0],d=i[1],m=r.a.useState(!1),h=Object(ne.a)(m,2),v=h[0],f=h[1];Object(n.useEffect)((function(){var e=[];Q.collection("users").doc(c).get().then((function(t){t.exists&&t.data().contacts.forEach((function(t){Q.collection("users").doc(t.email).get().then((function(t){if(t.exists){var a={displayName:t.data().displayName,pictureURL:t.data().pictureURL,email:t.data().email};e.push(a),d([].concat(e))}}))}))}))}),[v]);var E=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",onClick:function(){o(!0),f(!v)}},"View Contacts")),r.a.createElement(Re.a,{open:a,TransitionComponent:mt,keepMounted:!0,onClose:E,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Fe.a,null,"List of your Contacts"),r.a.createElement(Be.a,null,u.map((function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},r.a.createElement("br",null),r.a.createElement("img",{src:e.pictureURL,alt:"Profile","vertical-align":"middle",width:"30px",height:"30px"}),"    ",e.displayName,"    ",r.a.createElement("br",null),e.email,r.a.createElement(L.a,{variant:"contained",color:"secondary",margin:"theme.spacing(3)",size:"small",startIcon:r.a.createElement(Pe.a,null),value:e.email,onClick:function(){!function(e){u.splice(e,1),Q.collection("users").doc(c).update({contacts:u}),f(!v)}(t)}},r.a.createElement(Pe.a,null)),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",onClick:function(){var t;t=e.email,localStorage.setItem("selectedContact",JSON.stringify(t)),console.log("handleViewProfile - contactEmail: "+t)},component:dt.b,to:"/contact"},"View"),"    ")}))),r.a.createElement(ze.a,null,r.a.createElement(p.a,{onClick:E,color:"primary"},"Close"))))}var ht=a(79),vt=a.n(ht),ft=a(269),Et=a(124),gt=a.n(Et),bt=a(268),yt=a(132),St=a(123),Ot=a.n(St),Ct=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getMessage=function(){var e=a.props.data;return 1===e.typeOf?"You've been invited to "+e.eventTitle+"!":2===e.typeOf?e.eventTitle+" has been deleted!":3===e.typeOf?e.eventTitle+" has been changed by the owner!":(console.log("Error, should not appear!"),"typeOf returned bad")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.seen?null:r.a.createElement(Ot.a,null);return r.a.createElement("div",null,r.a.createElement(yt.a,null,r.a.createElement(bt.a,{container:!0,wrap:"nowrap",spacing:2},r.a.createElement(bt.a,{item:!0,xs:!0},t,r.a.createElement(je.a,null,this.getMessage()),r.a.createElement(L.a,{"aria-label":"delete",onClick:function(){return e.props.handleDelete(e.props.data.id)}},r.a.createElement(Pe.a,null))))))}}]),t}(n.Component),Dt={background:"#e7f5fe",color:"ivory",textAlign:"center",padding:"2px",fontSize:"24px",fontFamily:"Arial"},kt={textAlign:"right"},jt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(){if(!0===a.state.displayNotifications){for(var e=Q.batch(),t=0;t<a.state.notifications.length;t++){var n=Q.collection("notifications").doc(a.state.notifications[t].id);e.update(n,{seen:!0})}e.commit().catch((function(e){return console.log(e)}))}a.setState({displayNotifications:!a.state.displayNotifications})},a.handleDelete=function(e){Q.collection("notifications").doc(e).delete()},a.NotificationBar=function(){var e=a.state.notifications;return 0!==e.length?(console.log(e),e.map((function(e,t){return r.a.createElement(Ct,{key:t,data:e,handleDelete:function(e){return a.handleDelete(e)}})}))):(console.log("xdxd"),r.a.createElement("h4",{style:{color:"black"}},"No notifications to be shown"))},a.state={user:null,addContactsPrompt:!1,unreadNotifications:0,notifications:[],displayNotifications:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Q.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(t){t.exists&&e.setState({user:t.data()})})),Q.collection("notifications").where("user","==",JSON.parse(localStorage.getItem("currentUser"))).onSnapshot((function(t){var a=[],n=0;t.forEach((function(e){e.data().seen||n++,a.push(e.data())})),e.setState({unreadNotifications:n,notifications:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("header",{style:Dt},r.a.createElement("img",{src:vt.a,height:"180px",width:"230px",alt:"Schedule It"}),r.a.createElement("br",null),r.a.createElement(ft.a,{badgeContent:this.state.unreadNotifications,color:"secondary"},r.a.createElement(L.a,{onClick:function(){return e.handleClick()}},r.a.createElement(gt.a,null))),this.state.displayNotifications&&this.NotificationBar(),r.a.createElement("div",null,this.state.user&&r.a.createElement("div",null,r.a.createElement("div",{style:kt},r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",component:dt.b,to:"/profile"},"Profile"),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",component:dt.b,to:"/home"},"Events"))),r.a.createElement(ut,null),r.a.createElement(pt,null))))}}]),t}(n.Component),Nt=r.a.forwardRef((function(e,t){return r.a.createElement(He.a,Object.assign({direction:"up",ref:t},e))}));function wt(e){var t=r.a.useState(e.open),a=Object(ne.a)(t,2),n=a[0],o=a[1],l=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),c=Object(ne.a)(l,1)[0],s=r.a.useState(""),i=Object(ne.a)(s,2),u=i[0],d=i[1],h=r.a.useState(!1),v=Object(ne.a)(h,2),f=v[0],E=v[1],g=r.a.useState(!1),y=Object(ne.a)(g,2),S=y[0],O=y[1],C=r.a.useState(""),D=Object(ne.a)(C,2),k=D[0],j=D[1],N=function(e,t){"clickaway"!==t&&E(!1)},w=function(e,t){"clickaway"!==t&&O(!1)},I=function(){o(!1),e.beginJoinEvent()};return r.a.createElement("div",null,r.a.createElement(Re.a,{open:n,TransitionComponent:Nt,keepMounted:!0,onClose:I,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Fe.a,null,"Type in code in join event"),r.a.createElement(Be.a,null,r.a.createElement(it.a,null,"Enter in event's code:"),r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Event Code",type:"email",fullWidth:!0,onChange:function(e){d(e.target.value)}})),r.a.createElement(ze.a,null,r.a.createElement(p.a,{onClick:I,color:"primary"},"Close"),r.a.createElement(p.a,{onClick:function(){Q.collection("events").where("code","==",u).get().then((function(e){e.empty?(E(!0),j("Invalid code!")):e.forEach((function(e){Q.collection("events").doc(e.data().id).update({invitees:K.a.firestore.FieldValue.arrayUnion(c)}),O(!0),j("Successfully joined event!"),I()}))}))},color:"primary"},"Enter"))),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:f,autoHideDuration:6e3,onClose:N},r.a.createElement(z,{onClose:N,variant:"error",message:k})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:S,autoHideDuration:6e3,onClose:w},r.a.createElement(z,{onClose:w,variant:"success",message:k})))}var It=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).beginAddEvent=function(){localStorage.removeItem("saved_title"),localStorage.removeItem("saved_description"),localStorage.removeItem("saved_start_date"),localStorage.removeItem("saved_end_date"),localStorage.removeItem("saved_category"),a.setAdd()},a.beginJoinEvent=function(){a.setState({joinEvent:!a.state.joinEvent})},a.editEvent=function(e,t){Q.collection("events").doc(e).get().then((function(t){t.exists&&(console.log("GO"),localStorage.setItem("saved_title",JSON.stringify(t.data().title)),localStorage.setItem("saved_description",JSON.stringify(t.data().description)),localStorage.setItem("saved_category",JSON.stringify(t.data().category)),localStorage.setItem("saved_start_date",JSON.stringify(t.data().startDate)),localStorage.setItem("saved_end_date",JSON.stringify(t.data().endDate)),a.setState({editingEvent:!0,idOfEditEvent:e},a.setAdd()))}))},a.cancelEvent=function(){a.setHomePage()},a.setAdd=function(){a.setState({homePage:!1})},a.setHomePage=function(){a.setState({homePage:!0,editingEvent:!1,idOfEditEvent:""})},a.state={homePage:!0,editingEvent:!1,idOfEditEvent:"",joinEvent:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.joinEvent?r.a.createElement(wt,{open:!0,beginJoinEvent:function(){return e.beginJoinEvent()}}):null;return r.a.createElement("div",null,r.a.createElement(jt,null),this.state.homePage&&r.a.createElement(st,{beginAddEvent:this.beginAddEvent,beginJoinEvent:this.beginJoinEvent,editEvent:this.editEvent,deleteEvent:this.deleteEvent}),!this.state.homePage&&r.a.createElement(ge,{cancelEvent:this.cancelEvent,setHomePage:function(){return e.setHomePage()},editingEvent:this.state.editingEvent,idOfEditEvent:this.state.idOfEditEvent}),t)}}]),t}(n.Component),Mt=a(73),xt=a.n(Mt),_t={signInFlow:"popup",signInOptions:[{provider:K.a.auth.GoogleAuthProvider.PROVIDER_ID,authMethod:"https://accounts.google.com",clientId:"YOUR_OAUTH_CLIENT_ID"},{provider:K.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!0}],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},Pt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){K.a.auth().onAuthStateChanged((function(e){if(e){a.setState({isSignedIn:!0}),localStorage.setItem("currentUser",JSON.stringify(e.email));var t=Q.collection("users").doc(e.email);t.get().then((function(a){a.exists||t.set({displayName:e.displayName,email:e.email,contacts:[],events:[],polls:[],pictureURL:e.photoURL})})),Q.collection("users").doc(e.email).get().then((function(e){e.exists&&a.setState({picURL:e.data().pictureURL})})).catch((function(e){console.log("Error getting document",e)}))}else a.setState({isSignedIn:!1})}))},a.state={isSignedIn:!1,current_user_email:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"center",backgroundColor:"white",height:"250px",width:"300px",margin:"0 auto"}},r.a.createElement("img",{src:vt.a,height:"117px",width:"150px",alt:"Schedule It"}),r.a.createElement("br",null),this.state.isSignedIn?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",component:dt.b,to:"/home"},"Home")):r.a.createElement(xt.a,{uiCallback:function(e){return e.disableAutoSignIn()},uiConfig:_t,firebaseAuth:K.a.auth()}))}}]),t}(n.Component),Lt=a(87),Ut=a.n(Lt),At=a(127),Tt=a.n(At),Jt=a(126),Rt=a.n(Jt),zt={textAlign:"center",top:"100%",background:"#fff",fontSize:"20px",position:"relative"},Bt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Q.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(e){e.exists&&(a.setState({user:e.data()}),a.setState({picURL:e.data().pictureURL}),a.setState({nameDisplay:e.data().displayName}),a.setState({userName:e.data().displayName}),a.setState({current_user_email:e.data().email}),a.setState({bioDisplay:e.data().bio}),a.setState({userBio:e.data().bio}),a.setState({current_user_email:e.data().email}),a.setState({oldURL:e.data().pictureURL}))})).catch((function(e){console.log("Error getting document",e)}))},a.handleErrorClose=function(e,t){"clickaway"!==t&&a.setState({errorOpen:!1})},a.handleSuccessClose=function(e,t){a.setState({successOpen:!1})},a.handleUploadStart=function(){return a.setState({isUploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1}),console.error(e)},a.handleUploadSuccess=function(e){a.setState({profilePic:e,progress:100,isUploading:!1}),K.a.storage().ref("images").child(e).getDownloadURL().then((function(e){return a.setState({picURL:e})}))},a.signOut=function(){K.a.auth().signOut(),localStorage.clear()},a.updateDb=function(e){a.state.nameDisplay!==a.state.userName&&(Q.collection("users").doc(a.state.current_user_email).update({displayName:a.state.nameDisplay}),a.setState({successOpen:!0,message:"Successfully saved changes"})),a.state.bioDisplay!==a.state.userBio&&(Q.collection("users").doc(a.state.current_user_email).update({bio:a.state.bioDisplay}),a.setState({successOpen:!0,message:"Successfully saved changes"})),a.state.picURL!==a.state.oldURL&&(Q.collection("users").doc(a.state.current_user_email).update({pictureURL:a.state.picURL}),a.setState({successOpen:!0,message:"Successfully saved changes"}))},a.state={user:null,picURL:"",oldURL:"",nameDisplay:"",current_user_email:"",userName:"",bioDisplay:"",userBio:"",isUploading:!1,progress:0,profilePic:"",errorOpen:!1,successOpen:!1,message:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(jt,null),r.a.createElement("div",{style:zt},r.a.createElement("img",{src:this.state.picURL,alt:"Profile","vertical-align":"middle",width:"100px",height:"100px","border-radius":"50%"}),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.updateDb},r.a.createElement("label",null,r.a.createElement(Ut.a,{hidden:!0,accept:"image/*",name:"Profile Picture",randomizeFilename:!0,storageRef:K.a.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}),r.a.createElement(L.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(Rt.a,null))),r.a.createElement("br",null),r.a.createElement("label",{style:{fontSize:18}},this.state.current_user_email),r.a.createElement("br",null),r.a.createElement("label",{style:{fontSize:18}},"Name"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"fullname",size:"26",placeholder:"Your name",onChange:function(t){return e.setState({nameDisplay:t.target.value})},value:this.state.nameDisplay}),r.a.createElement("br",null),r.a.createElement("label",{style:{fontSize:18}},"Biography"),r.a.createElement("br",null),r.a.createElement("textarea",{name:"bioText",rows:"10",cols:"27",placeholder:"Biography",value:this.state.bioDisplay,onChange:function(t){return e.setState({bioDisplay:t.target.value})}}),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",type:"submit",margin:"theme.spacing(1)",startIcon:r.a.createElement(Tt.a,null)},"Save")),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){return e.signOut()},size:"small",component:dt.b,to:"/"},"Sign Out"),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.errorOpen,autoHideDuration:10,onClose:this.state.handleErrorClose},r.a.createElement(z,{onClose:this.state.handleErrorClose,variant:"error",message:this.state.message})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.successOpen,autoHideDuration:10,onClose:this.state.handleSuccessClose},r.a.createElement(z,{onClose:this.state.handleSuccessClose,variant:"success",message:this.state.message}))))}}]),t}(n.Component),Ft={textAlign:"center",top:"100%",background:"#fff",fontSize:"20px",position:"relative"},Ht=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){Q.collection("users").doc(JSON.parse(localStorage.getItem("selectedContact"))).get().then((function(e){e.exists&&(a.setState({contactEmail:e.data().email}),a.setState({contactURL:e.data().pictureURL}),a.setState({contactBio:e.data().bio}),a.setState({contactName:e.data().displayName}))})).catch((function(e){console.log("Error getting document",e)}))},a.state={contactEmail:"",contactURL:"",contactName:"",contactBio:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",{style:Ft},r.a.createElement("br",null),r.a.createElement("img",{src:this.state.contactURL,alt:"Profile","vertical-align":"middle",width:"100px",height:"100px","border-radius":"50%"}),r.a.createElement("br",null),r.a.createElement("label",null," email: "),this.state.contactEmail,r.a.createElement("br",null),r.a.createElement("label",null," Name: "),this.state.contactName,r.a.createElement("br",null),r.a.createElement("label",null," Biography: "),r.a.createElement("br",null),this.state.contactBio,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"contained",color:"primary",size:"small",component:dt.b,to:"/home"},"Home")))}}]),t}(n.Component),Vt=a(47);var Wt=function(){return r.a.createElement(dt.a,null,r.a.createElement(Vt.c,null,r.a.createElement(Vt.a,{exact:!0,path:"/"},r.a.createElement(Pt,null)),r.a.createElement(Vt.a,{exact:!0,path:"/home"},r.a.createElement(It,null)),r.a.createElement(Vt.a,{exact:!0,path:"/profile"},r.a.createElement(Bt,null)),r.a.createElement(Vt.a,{exact:!0,path:"/contact"},r.a.createElement(Ht,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Wt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},79:function(e,t,a){e.exports=a.p+"static/media/logo.88ca5a89.png"}},[[149,1,2]]]);
//# sourceMappingURL=main.0afbecd6.chunk.js.map