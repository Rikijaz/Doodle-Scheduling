(this.webpackJsonpdoodle_integrated=this.webpackJsonpdoodle_integrated||[]).push([[0],{118:function(e,t,a){e.exports=a.p+"static/media/logo.88ca5a89.png"},141:function(e,t,a){e.exports=a(187)},146:function(e,t,a){},147:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a.n(o),l=(a(146),a(147),a(17)),i=a(18),s=a(20),u=a(19),d=a(21),m=a(255),h=a(222),p=a(109),v=a.n(p),E=a(52),f=a.n(E),g=a(230),b=a(254),S=a(3),O=a(4),y=a(97),C=a.n(y),k=a(99),j=a.n(k),D=a(100),w=a.n(D),N=a(104),I=a.n(N),P=a(101),M=a.n(P),x=a(102),_=a.n(x),A=a(221),J=a(220),T=a(98),U=a.n(T),F=a(5),L={success:C.a,warning:U.a,error:j.a,info:w.a};var z=Object(F.a)((function(e){return{success:{backgroundColor:M.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:_.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}}))((function(e){var t=e.classes,a=e.className,n=e.message,o=e.onClose,c=e.variant,l=Object(S.a)(e,["classes","className","message","onClose","variant"]),i=L[c];return r.a.createElement(J.a,Object.assign({className:Object(O.a)(t[c],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(i,{className:Object(O.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(A.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(I.a,{className:t.icon}))]},l))})),R=a(105),B=a(23),H=a.n(B),V=a(106),W=a.n(V);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleEventRemove=function(e){var t=a.state.selectedIntervals,n=t.findIndex((function(t){return t.uid===e.uid}));n>-1&&(t.splice(n,1),a.setState({selectedIntervals:t}))},a.handleEventUpdate=function(e){var t=a.state.selectedIntervals,n=t.findIndex((function(t){return t.uid===e.uid}));n>-1&&(t[n]=e,a.setState({selectedIntervals:t}))},a.handleSelect=function(e){var t=a.state,n=t.lastUid,r=t.selectedIntervals,o=e.map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{uid:n+t})}));a.setState({selectedIntervals:r.concat(o),lastUid:n+e.length}),a.props.parentMethod(o)},a.state={lastUid:1,selectedIntervals:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(W.a,{dayFormat:"dddd, MM.DD",startTime:H()({h:0,m:0}),endTime:H()({h:23,m:50}),scaleFormat:"hh:mm a",numberOfDays:7,selectedIntervals:this.state.selectedIntervals,onIntervalSelect:this.handleSelect,onIntervalUpdate:this.handleEventUpdate,onIntervalRemove:this.handleEventRemove,useModal:!1})}}]),t}(r.a.Component),K=(a(163),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).changeCalendar=function(e){a.setState({calendar:e})},a.onEventSubmitted=function(e){console.log(e[0].start.format()),console.log(H()(e[0].start.format()).format("LLLL"));var t=e[0].start.format(),n=e[0].end.format();a.setState({startDate:t,endDate:n}),localStorage.setItem("saved_start_date",JSON.stringify(t)),localStorage.setItem("saved_end_date",JSON.stringify(n))},a.renderCalendar=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Choose your time!"),r.a.createElement(G,{parentMethod:function(e){return a.onEventSubmitted(e)}},a.props.children))},a.renderButtons=function(){return r.a.createElement("div",null,r.a.createElement(h.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.props.goToFirstPage},"Back"),r.a.createElement("br",null),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",size:"large",onClick:function(e){return a.props.goToThirdPage(a.state.endDate,a.state.startDate,e)}},"Next"),r.a.createElement("br",null),r.a.createElement(h.a,{type:"button",className:"userCancelButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(f.a,null),onClick:a.props.cancelEvent},"Cancel"))},a.state={startDate:JSON.parse(localStorage.getItem("saved_start_date")),endDate:JSON.parse(localStorage.getItem("saved_end_date")),calendar:"default"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.state.calendar;return r.a.createElement("div",null,this.renderCalendar(),this.renderButtons())}}]),t}(n.Component)),Q=a(228),X=a(251),Y=a(229),$=a(15),Z=a(224),ee=a(259),te=a(256),ae=a(223),ne=a(227),re=a(252),oe=a(53),ce=a.n(oe),le=(a(172),ce.a.initializeApp({apiKey:"AIzaSyAmcdm-nCXD4ahr4EwKddfHQ_vpqkMEPWA",authDomain:"cs180-schedulingapp.firebaseapp.com",databaseURL:"https://cs180-schedulingapp.firebaseio.com",projectId:"cs180-schedulingapp",storageBucket:"cs180-schedulingapp.appspot.com",messagingSenderId:"350264880268",appId:"1:350264880268:web:4fb4718431afc39b6e9fa9",measurementId:"G-DBB71H8E8J"}).firestore());ce.a.storage();function ie(e){var t=r.a.useState([]),a=Object($.a)(t,2),o=a[0],c=a[1],l=r.a.useState([]),i=Object($.a)(l,2),s=i[0],u=i[1];return Object(n.useEffect)((function(){console.log("1"),le.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(e){if(e.exists){var t=e.data().contacts.map((function(e){return e.email}));u(t)}}))}),[]),Object(n.useEffect)((function(){console.log("2"),e.setSharedEvent(o)}),[o]),r.a.createElement("div",null,r.a.createElement(ae.a,null,r.a.createElement(ee.a,{id:"demo-mutiple-checkbox-label"},"Select Contacts to Invite"),r.a.createElement(re.a,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,value:o,onChange:function(e){c(e.target.value),console.log(e.target.value)},input:r.a.createElement(Z.a,null),renderValue:function(e){return e.join(", ")}},s.map((function(e){return r.a.createElement(te.a,{key:e,value:e},r.a.createElement(X.a,{checked:o.indexOf(e)>-1}),r.a.createElement(ne.a,{primary:e}))})))))}var se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleCheckbox=function(){a.setState({checked:!a.state.checked})},a.renderOptions=function(){return r.a.createElement("div",null,r.a.createElement(Q.a,{row:!0},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:a.state.checked,value:a.state.checked,onChange:function(){return a.handleCheckbox()}}),label:"Make this event shareable"})),a.renderContactDropdown())},a.renderContactDropdown=function(){if(a.state.checked)return r.a.createElement(ie,{setSharedEvent:function(e){return a.setSharedEvent(e)}})},a.setSharedEvent=function(e){a.setState({invite_list:e})},a.renderButtons=function(){return r.a.createElement("div",null,r.a.createElement(h.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.props.goToSecondPage},"Back"),r.a.createElement("br",null),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",size:"large",onClick:function(e){return a.props.submitEvent(e,a.state.invite_list)}},"Submit Event"),r.a.createElement("br",null),r.a.createElement(h.a,{type:"button",className:"userCancelButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(f.a,null),onClick:a.props.cancelEvent},"Cancel"))},a.state={checked:!1,invite_list:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderOptions(),r.a.createElement("br",null),this.renderButtons())}}]),t}(n.Component),ue=a(108),de=a.n(ue),me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleErrorClose=function(e,t){"clickaway"!==t&&a.setState({errorMessageOpen:!1})},a.handleSuccessClose=function(e,t){"clickaway"!==t&&a.setState({successMessageOpen:!1})},a.handleTitle=function(e){a.setState({title:e.target.value})},a.handleDescription=function(e){a.setState({description:e.target.value})},a.onSubmitFirstPage=function(e){e.preventDefault(),""!==a.state.title&&null!==a.state.title?(localStorage.setItem("saved_title",JSON.stringify(a.state.title)),localStorage.setItem("saved_description",JSON.stringify(a.state.description)),a.setState({firstPage:!1,secondPage:!0})):a.setState({errorMessageOpen:!0,message:"Please input a title!"})},a.goToFirstPage=function(){a.setState({firstPage:!0,secondPage:!1})},a.goToThirdPage=function(e,t,n){n.preventDefault(),null!==e&&""!==e&&null!==t&&""!==t?a.setState({startDate:e,endDate:t,firstPage:!1,secondPage:!1,thirdPage:!0}):a.setState({errorMessageOpen:!0,message:"Please input a date and time!"})},a.goToSecondPage=function(){a.setState({firstPage:!1,secondPage:!0,thirdPage:!1})},a.submitEvent=function(e,t){e.preventDefault();var n=a.makeCode(5),r=a.props,o=r.idOfEditEvent,c=r.editingEvent,l=de.a.v4();c?le.collection("events").doc(o).update({title:a.state.title,description:a.state.description,startDate:a.state.startDate,endDate:a.state.endDate,invitees:t}):le.collection("events").doc(l).set({id:l,code:n,title:a.state.title,description:a.state.description,startDate:a.state.startDate,endDate:a.state.endDate,owners:a.state.owners,accepted_invitees:[],declined_invitees:[],invitees:t}),a.props.setHomePage()},a.makeCode=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},a.viewForm=function(){return a.state.firstPage?r.a.createElement("div",null,r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement("form",{onSubmit:function(e){return a.onSubmitFirstPage(e)}},r.a.createElement(m.a,{type:"text",variant:"outlined",placeholder:"Event Name",fullWidth:!0,value:a.state.title,margin:"normal",onChange:function(e){return a.handleTitle(e)}}),r.a.createElement(m.a,{type:"text",variant:"outlined",placeholder:"Event Description ... Optional",fullWidth:!0,value:a.state.description,margin:"normal",onChange:function(e){return a.handleDescription(e)}}),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(h.a,{type:"submit",className:"userContinueButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(v.a,null),onClick:function(e){return a.onSubmitFirstPage(e)}},"Continue")),r.a.createElement(h.a,{type:"button",className:"userCancelButton",variant:"contained",color:"primary",size:"large",endIcon:r.a.createElement(f.a,null),onClick:a.props.cancelEvent},"Cancel")))):a.state.secondPage?r.a.createElement("div",null,r.a.createElement(K,{cancelEvent:a.props.cancelEvent,goToFirstPage:function(){return a.goToFirstPage()},goToThirdPage:function(e,t,n){return a.goToThirdPage(e,t,n)}})):a.state.thirdPage?r.a.createElement("div",null,r.a.createElement(se,{goToSecondPage:function(){return a.goToSecondPage()},cancelEvent:a.props.cancelEvent,submitEvent:function(e,t){return a.submitEvent(e,t)}})):void 0},a.state={title:JSON.parse(localStorage.getItem("saved_title"))||"",description:JSON.parse(localStorage.getItem("saved_description"))||"",startDate:JSON.parse(localStorage.getItem("saved_start_date"))||"",endDate:JSON.parse(localStorage.getItem("saved_end_date"))||"",calendar:"default",firstPage:!0,secondPage:!1,thirdPage:!1,owners:[JSON.parse(localStorage.getItem("currentUser"))],shared:!1,invitees:[],errorMessageOpen:!1,message:"",successMessageOpen:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.viewForm(),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.errorMessageOpen,autoHideDuration:6e3,onClose:this.handleErrorClose},r.a.createElement(z,{onClose:this.handleErrorClose,variant:"error",message:this.state.message})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.successMessageOpen,autoHideDuration:6e3,onClose:this.handleSuccessClose},r.a.createElement(z,{onClose:this.handleSuccessClose,variant:"success",message:"New event has been created"})))}}]),t}(n.Component),he=a(121),pe=(a(175),a(69)),ve=a(43),Ee=a(110),fe=a(111),ge=a(38),be=a(124),Se=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(Ee.a)(this,Object(fe.a)(t).call(this,e))).state={contentList:[],emailList:[]},a.handleChange=a.handleChange.bind(Object(ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(ge.a)(a)),a}return Object(be.a)(t,e),Object(ve.a)(t,[{key:"componentDidMount",value:function(){var e=this;le.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(t){t.exists&&e.setState({emailList:t.data().contacts,contentList:t.data().events})}))}},{key:"render",value:function(){return r.a.createElement("form",{className:"test-mailing"},r.a.createElement("h1",null,"Let's see if it works"),r.a.createElement("div",null,r.a.createElement("textarea",{id:"test-mailing",name:"test-mailing",onChange:this.handleChange,placeholder:"Send event",required:!0,value:this.state.feedback,style:{width:"100%",height:"150px"}})),r.a.createElement("input",{type:"button",value:"Submit",className:"btn btn--submit",onClick:this.handleSubmit}))}},{key:"handleChange",value:function(e){this.setState({feedback:e.target.value})}},{key:"handleSubmit",value:function(e){this.sendFeedback("yes",{message_html:this.state.feedback,from_name:this.state.name,reply_to:this.state.email}),this.props.handleDisplay()}},{key:"sendFeedback",value:function(e,t){window.emailjs.send("gmail",e,{send_to:this.state.emailList,content:this.state.contentList}).then((function(e){console.log("Email successfully sent!"),console.log(t)})).catch((function(e){return console.error("Oh well, you failed. Here some thoughts on the error that occured:",e)}))}}]),t}(r.a.Component),Oe=a(235),ye=a(237),Ce=a(236),ke=a(47),je=a(116),De=a.n(je),we=a(115),Ne=a.n(we),Ie=a(238),Pe=a(112),Me=a.n(Pe),xe=a(114),_e=a.n(xe),Ae=a(113),Je=a.n(Ae),Te=a(122),Ue=a(253),Fe=a(234),Le=a(233),ze=a(232),Re=a(231),Be=r.a.forwardRef((function(e,t){return r.a.createElement(Re.a,Object.assign({direction:"up",ref:t},e))}));function He(e){var t=r.a.useState(e.open),a=Object($.a)(t,2),o=a[0],c=a[1],l=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),i=Object($.a)(l,1)[0],s=r.a.useState([]),u=Object($.a)(s,2),d=u[0],m=u[1],p=r.a.useState([]),v=Object($.a)(p,2),E=v[0],f=v[1],g=r.a.useState(!1),b=Object($.a)(g,2),S=b[0],O=b[1],y=function(){c(!1)};return Object(n.useEffect)((function(){le.collection("users").doc(i).get().then((function(e){if(e.exists){var t=e.data().contacts.map((function(e){return e.email}));f(t)}})),le.collection("events").doc(e.id).get().then((function(e){m(e.data().invitees),O(!0)}))}),[]),Object(n.useEffect)((function(){S&&le.collection("events").doc(e.id).update({invitees:d})}),[d]),r.a.createElement("div",null,r.a.createElement(Ue.a,{open:o,TransitionComponent:Be,keepMounted:!0,onClose:y,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(ze.a,null,"Invite More"),r.a.createElement(Le.a,null,E.map((function(e){return r.a.createElement(te.a,{key:e,value:e},r.a.createElement(X.a,{checked:d.indexOf(e)>-1,onChange:function(){return t=e,void(d.includes(t)?m(d.filter((function(e){return e!==t}))):m([].concat(Object(Te.a)(d),[t])));var t}}),r.a.createElement(ne.a,{primary:e}))}))),r.a.createElement(Fe.a,null,r.a.createElement(h.a,{onClick:y,color:"primary"},"Close"))))}var Ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleShareEvent=function(){a.setState({startShare:!a.state.startShare})},a.state={expanded:!1,startShare:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.isShared,o=t.hasAccepted,c=a.invitees?a.invitees.join("\n"):"",l=n?"Shared event":"Made by me",i=this.state.startShare?r.a.createElement(He,{id:a.id,open:this.state.startShare}):null,s=n?null:r.a.createElement(h.a,{size:"small",color:"primary",onClick:function(){return e.props.editEvent(a.id)}},"edit"),u=n?null:r.a.createElement(A.a,{"aria-label":"delete",onClick:function(){return e.props.deleteEvent(a.id)}},r.a.createElement(Me.a,null)),d=n&&!o?r.a.createElement("div",null,r.a.createElement(A.a,{onClick:function(){return e.props.acceptInvite(a.id)}},r.a.createElement(Je.a,null)),r.a.createElement(A.a,{onClick:function(){return e.props.declineInvite(a.id)}},r.a.createElement(_e.a,null))):null;return r.a.createElement("div",null,r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{color:"textSecondary",gutterBottom:!0},l),r.a.createElement(ke.a,{variant:"h5",component:"h2"},a.title),r.a.createElement(ke.a,null,a.description),r.a.createElement(ke.a,null,H()(a.startDate).format("LLLL"))),r.a.createElement(ye.a,null,s,r.a.createElement(A.a,{"aria-label":"share",onClick:function(){return e.handleShareEvent()}},r.a.createElement(Ne.a,null)),u,r.a.createElement(A.a,{onClick:function(){e.setState({expanded:!e.state.expanded})},"aria-expanded":this.state.expanded,"aria-label":"show more"},r.a.createElement(De.a,null)),d),r.a.createElement(Ie.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ce.a,null,r.a.createElement(ke.a,null,"Owners: ",a.owners,r.a.createElement("br",null),"Invitees: ",c)))),i)}}]),t}(n.Component),We=a(123),qe=a(239),Ge=a(249),Ke=a(240),Qe=a(241),Xe=a(242),Ye=a(243),$e=a(244),Ze=a(245),et=a(246),tt=a(247),at=a(258),nt=(a(176),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onClose=function(e){a.props.onClose&&a.props.onClose(e)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.show?r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement("h2",null,this.props.title," ",H()(this.props.startDate).format("LT")),r.a.createElement("div",{className:"content"},this.props.description),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"toggle-button",onClick:this.onClose},"close"))):null}}]),t}(r.a.Component)),rt=(a(177),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).showModal=function(e,t,n,r){a.title=e,a.description=t,a.startDate=n,a.endDate=r,a.setState({show:!a.state.show,title:a.title,description:a.description,startDate:a.startDate,endDate:a.endDate})},a.onDateClick=function(e){a.setState({selectedDate:"day"})},a.nextMonth=function(){a.setState({currentMonth:We.a(a.state.currentMonth,1)})},a.prevMonth=function(){a.setState({currentMonth:qe.a(a.state.currentMonth,1)})},a.state={currentMonth:new Date,selectedDate:null,show:!1,title:"",description:"",startDate:"",endDate:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"renderHeader",value:function(){return r.a.createElement("div",{className:"header row flex-middle"},r.a.createElement("div",{className:"col col-start"},r.a.createElement("div",{className:"icon",onClick:this.prevMonth},"chevron_left")),r.a.createElement("div",{className:"col col-center"},r.a.createElement("span",null,Ge.a(this.state.currentMonth,"MMMM yyyy"))),r.a.createElement("div",{className:"col col-end",onClick:this.nextMonth},r.a.createElement("div",{className:"icon"},"chevron_right")))}},{key:"renderDays",value:function(){for(var e=[],t=Ke.a(this.state.currentMonth),a=0;a<7;a++)e.push(r.a.createElement("div",{className:"col col-center",key:a},Ge.a(Qe.a(t,a),"iiii")));return r.a.createElement("div",{className:"days row"},e)}},{key:"renderCells",value:function(){var e=this,t=!(null===this.props.events||void 0===this.props.events||0===this.props.events.length),a=!(null===this.props.sharedEvents||void 0===this.props.sharedEvents||0===this.props.sharedEvents.length);if(t||a){var n,o,c,l=function(){var l=e.state,i=l.currentMonth,s=l.selectedDate,u=Xe.a(i),d=Ye.a(u),m=Ke.a(u),h=$e.a(d),p=[],v=[],E=m,f="",g=[];if(t)for(var b=0;b<e.props.events.length;++b)H()(e.props.events[b].startDate).format("L").split("/")[0]==Ze.a(i)+1&&(n={date:e.props.events[b].date,title:e.props.events[b].title,description:e.props.events[b].description,startDate:e.props.events[b].startDate,endDate:e.props.events[b].endDate},g.push(n));if(a)for(var S=0;S<e.props.sharedEvents.length;++S)H()(e.props.sharedEvents[S].startDate).format("L").split("/")[0]==Ze.a(i)+1&&(n={date:e.props.sharedEvents[S].date,title:e.props.sharedEvents[S].title,description:e.props.sharedEvents[S].description,startDate:e.props.sharedEvents[S].startDate,endDate:e.props.sharedEvents[S].endDate},g.push(n));for(console.log(Object.prototype.toString.call(E).match(/^\[object\s(.*)\]$/)[1]);E<=h;){for(var O=0;O<7;O++){f=Ge.a(E,"d");o=!1;for(var y=function(t){c=g[t].title,H()(g[t].startDate).format("L").split("/")[1]==et.a(E)&&H()(g[t].startDate).format("L").split("/")[0]==Ze.a(E)+1&&(v.push(r.a.createElement("div",{className:"col cell ".concat(tt.a(E,u)?at.a(E,s)?"selected":"":"disabled"),key:E,onClick:function(a){e.showModal(g[t].title,g[t].description,g[t].startDate,g[t].endDate)}},r.a.createElement("span",{className:"number"},f),r.a.createElement("span",{className:"bg"},f),r.a.createElement("span",{className:"title"},c))),o=!0)},C=0;C<g.length&&!o;++C)y(C);o||v.push(r.a.createElement("div",{className:"col cell ".concat(tt.a(E,u)?at.a(E,s)?"selected":"":"disabled"),key:E},r.a.createElement("span",{className:"number"},f),r.a.createElement("span",{className:"bg"},f))),E=Qe.a(E,1)}p.push(r.a.createElement("div",{className:"row",key:E},v)),v=[]}return{v:r.a.createElement("div",{className:"body"},p)}}();if("object"===typeof l)return l.v}}},{key:"render",value:function(){return r.a.createElement("div",{id:"parent"},r.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells()),r.a.createElement("div",{className:"modal"},r.a.createElement(nt,{onClose:this.showModal,show:this.state.show,title:this.title,description:this.description,startDate:this.startDate,endDate:this.endDate})))}}]),t}(r.a.Component)),ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).sendEmail=function(){a.setState({showForm:!0})},a.switchEventView=function(){a.setState({showShared:!a.state.showShared})},a.viewForm=function(){return a.state.showShared?r.a.createElement("div",null,a.showSharedEvents()):r.a.createElement("div",null,a.showEvents())},a.showEvents=function(){var e=a.state.events;return a.areThereNoEvents()?r.a.createElement("h2",null,"No events"):e.map((function(e,t){return r.a.createElement(Ve,{key:t,data:e,editEvent:function(e){return a.props.editEvent(e)},deleteEvent:function(e){return a.deleteEvent(e)}})}))},a.showSharedEvents=function(){var e=a.state.sharedEvents;return a.areThereNoSharedEvents()?r.a.createElement("h2",null,"No shared events"):(console.log(),e.map((function(e,t){return r.a.createElement(Ve,{key:t,data:e,isShared:!0,hasAccpeted:!1,acceptInvite:function(e){return a.acceptInvite(e)},declineInvite:function(e){return a.declineInvite(e)}})})))},a.showAcceptedEvents=function(){var e=a.state.acceptedEvents;return a.areNoAcceptedEvents()?r.a.createElement("h2",null,"No accepted events"):e.map((function(e,t){return r.a.createElement(Ve,{key:t,data:e,isShared:!0,hasAccpeted:!0})}))},a.showCalendar=function(){var e=a.state.events,t=a.state.sharedEvents;if(!a.areThereNoEvents()||!a.areThereNoSharedEvents())return r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement(rt,{events:e,sharedEvents:t})))},a.getBtnStyle=function(){return{textAlign:"right",padding:"10px"}},a.getMainStyle=function(){return{textAlign:"center",padding:"5px"}},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget,openMenu:!a.state.openMenu})},a.handleClose=function(){a.setState({anchorEl:null,openMenu:!a.state.openMenu})},a.handleAddEventMenu=function(){a.handleClose(),a.props.beginAddEvent()},a.handleJoinEventMenu=function(){a.handleClose(),a.props.beginJoinEvent()},a.handleDisplay=function(){a.setState({showForm:!1})},a.deleteEvent=function(e){le.collection("events").doc(e).delete();var t={temp:[]},n=JSON.parse(localStorage.getItem("currentUser"));le.collection("events").where("owners","array-contains",n).get().then((function(e){t.temp=[],e.forEach((function(e){t.temp.push(e.data())})),a.setState({events:t.temp})})).catch((function(e){console.error(e)})),le.collection("events").where("invitees","array-contains",n).get().then((function(e){t.temp=[],e.forEach((function(e){t.temp.push(e.data())})),a.setState({sharedEvents:t.temp})})).catch((function(e){return console.error(e)}))},a.acceptInvite=function(e){var t=le.collection("events").doc(e);t.update({invitees:ce.a.firestore.FieldValue.arrayRemove(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)})),t.update({accepted_invitees:ce.a.firestore.FieldValue.arrayUnion(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)}))},a.declineInvite=function(e){var t=le.collection("events").doc(e);t.update({invitees:ce.a.firestore.FieldValue.arrayRemove(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)})),t.update({declined_invitees:ce.a.firestore.FieldValue.arrayUnion(JSON.parse(localStorage.getItem("currentUser")))}).catch((function(e){return console.error(e)}))},a.state={anchorEl:null,openMenu:!1,showForm:!1,showShared:!1,events:[],sharedEvents:[],acceptedEvents:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"areThereNoEvents",value:function(){return null===this.state.events||void 0===this.state.events||0===this.state.events.length}},{key:"areThereNoSharedEvents",value:function(){return null===this.state.sharedEvents||void 0===this.state.sharedEvents||0===this.state.sharedEvents.length}},{key:"areNoAcceptedEvents",value:function(){return null===this.state.acceptedEvents||void 0===this.state.acceptedEvents||0===this.state.acceptedEvents.length}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.showForm&&r.a.createElement("div",null,r.a.createElement(Se,{handleDisplay:this.handleDisplay})),r.a.createElement("div",{style:this.getBtnStyle()},r.a.createElement(h.a,{variant:"contained",color:"primary","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(t){return e.handleClick(t)}},"Create/Join Event"),r.a.createElement(he.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:this.state.openMenu,onClose:this.handleClose},r.a.createElement(te.a,{onClick:this.handleAddEventMenu},"Create Event"),r.a.createElement(te.a,{onClick:this.handleJoinEventMenu},"Join Event"))),r.a.createElement("div",{style:this.getMainStyle()},r.a.createElement(h.a,{onClick:function(){return e.switchEventView()}},"Switch"),this.viewForm(),this.showCalendar()))}},{key:"componentDidMount",value:function(){var e=this,t={temp:[]},a=JSON.parse(localStorage.getItem("currentUser"));le.collection("events").where("owners","array-contains",a).get().then((function(a){t.temp=[],a.forEach((function(e){t.temp.push(e.data())})),e.setState({events:t.temp})})).catch((function(e){console.error(e)})),le.collection("events").where("invitees","array-contains",a).get().then((function(a){t.temp=[],a.forEach((function(e){t.temp.push(e.data())})),e.setState({sharedEvents:t.temp})})).catch((function(e){return console.error(e)})),le.collection("events").where("accepted_invitees","array-contains",a).get().then((function(a){t.temp=[],a.forEach((function(e){t.temp.push(e.data())})),e.setState({acceptedEvents:t.temp})}))}}]),t}(n.Component),ct=a(248);function lt(){var e=r.a.useState(!1),t=Object($.a)(e,2),a=t[0],n=t[1],o=r.a.useState(""),c=Object($.a)(o,2),l=c[0],i=c[1],s=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),u=Object($.a)(s,1)[0],d=r.a.useState(!1),p=Object($.a)(d,2),v=p[0],E=p[1],f=r.a.useState(!1),g=Object($.a)(f,2),S=g[0],O=g[1],y=r.a.useState(""),C=Object($.a)(y,2),k=C[0],j=C[1],D=function(){n(!1)},w=function(e,t){"clickaway"!==t&&E(!1)},N=function(e,t){"clickaway"!==t&&O(!1)};return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(h.a,{variant:"contained",color:"primary",size:"small",onClick:function(){n(!0)}},"Add Contact")),r.a.createElement(Ue.a,{open:a,onClose:D,"aria-labelledby":"form-dialog-title"},r.a.createElement(ze.a,{id:"form-dialog-title"},"Adding Contact"),r.a.createElement(Le.a,null,r.a.createElement(ct.a,null,"To add a contact, please enter their email address."),r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){i(e.target.value)}})),r.a.createElement(Fe.a,null,r.a.createElement(h.a,{onClick:D,color:"primary"},"Cancel"),r.a.createElement(h.a,{onClick:function(){le.collection("users").doc(l).get().then((function(e){e.exists?(le.collection("users").doc(u).update({contacts:ce.a.firestore.FieldValue.arrayUnion({displayName:e.data().displayName,email:l})}),D(),O(!0),j("Successfully added contact!")):(E(!0),j("Invalid contact!"))}))},color:"primary"},"Enter"))),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:v,autoHideDuration:6e3,onClose:w},r.a.createElement(z,{onClose:w,variant:"error",message:k})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:S,autoHideDuration:6e3,onClose:N},r.a.createElement(z,{onClose:N,variant:"success",message:k})))}var it=r.a.forwardRef((function(e,t){return r.a.createElement(Re.a,Object.assign({direction:"up",ref:t},e))}));function st(){var e=r.a.useState(!1),t=Object($.a)(e,2),a=t[0],o=t[1],c=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),l=Object($.a)(c,1)[0],i=r.a.useState([]),s=Object($.a)(i,2),u=s[0],d=s[1];Object(n.useEffect)((function(){le.collection("users").doc(l).get().then((function(e){e.exists&&d(e.data().contacts)}))}),[]);var m=function(){o(!1)},p=u.map((function(e,t){return r.a.createElement("li",{key:t},e.displayName," ",r.a.createElement("br",null)," ",e.email)}));return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(h.a,{variant:"contained",color:"primary",size:"small",onClick:function(){o(!0)}},"View Contacts")),r.a.createElement(Ue.a,{open:a,TransitionComponent:it,keepMounted:!0,onClose:m,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(ze.a,null,"List of your Contacts"),r.a.createElement(Le.a,null,p),r.a.createElement(Fe.a,null,r.a.createElement(h.a,{onClick:m,color:"primary"},"Close"))))}var ut=a(55),dt={background:"#D0E6FF",color:"#5a769e",textAlign:"center",padding:"3px",fontSize:"24px",fontFamily:"Courier New",fontStyle:"italic"},mt={textAlign:"right"},ht=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onClickSignOut=function(){ce.a.auth().signOut(),localStorage.clear()},a.state={user:null,addContactsPrompt:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;le.collection("users").doc(JSON.parse(localStorage.getItem("currentUser"))).get().then((function(t){t.exists&&e.setState({user:t.data()})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",{style:dt},r.a.createElement("h1",null,"Schedule It"),r.a.createElement(lt,null),r.a.createElement(st,null),this.state.user&&r.a.createElement("div",null,r.a.createElement("div",{style:mt},r.a.createElement(h.a,{variant:"contained",color:"primary",size:"small",component:ut.b,to:"/"},this.state.user.email)),r.a.createElement("div",null,"Welcome ",this.state.user.displayName))))}}]),t}(n.Component),pt=r.a.forwardRef((function(e,t){return r.a.createElement(Re.a,Object.assign({direction:"up",ref:t},e))}));function vt(e){var t=r.a.useState(e.open),a=Object($.a)(t,2),n=a[0],o=a[1],c=r.a.useState(JSON.parse(localStorage.getItem("currentUser"))),l=Object($.a)(c,1)[0],i=r.a.useState(""),s=Object($.a)(i,2),u=s[0],d=s[1],p=r.a.useState(!1),v=Object($.a)(p,2),E=v[0],f=v[1],g=r.a.useState(!1),S=Object($.a)(g,2),O=S[0],y=S[1],C=r.a.useState(""),k=Object($.a)(C,2),j=k[0],D=k[1],w=function(e,t){"clickaway"!==t&&f(!1)},N=function(e,t){"clickaway"!==t&&y(!1)},I=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(Ue.a,{open:n,TransitionComponent:pt,keepMounted:!0,onClose:I,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(ze.a,null,"Type in code in join event"),r.a.createElement(Le.a,null,r.a.createElement(ct.a,null,"Enter in event's code:"),r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Event Code",type:"email",fullWidth:!0,onChange:function(e){d(e.target.value)}})),r.a.createElement(Fe.a,null,r.a.createElement(h.a,{onClick:I,color:"primary"},"Close"),r.a.createElement(h.a,{onClick:function(){le.collection("events").where("code","==",u).get().then((function(e){e.empty?(f(!0),D("Invalid code!")):e.forEach((function(e){le.collection("events").doc(e.data().id).update({invitees:ce.a.firestore.FieldValue.arrayUnion(l)}),y(!0),D("Successfully joined event!"),I()}))}))},color:"primary"},"Enter"))),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:E,autoHideDuration:6e3,onClose:w},r.a.createElement(z,{onClose:w,variant:"error",message:j})),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:O,autoHideDuration:6e3,onClose:N},r.a.createElement(z,{onClose:N,variant:"success",message:j})))}var Et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).beginAddEvent=function(){localStorage.removeItem("saved_title"),localStorage.removeItem("saved_description"),localStorage.removeItem("saved_start_date"),localStorage.removeItem("saved_end_date"),a.setAdd()},a.beginJoinEvent=function(){a.setState({joinEvent:!a.state.joinEvent})},a.editEvent=function(e,t){t||le.collection("events").doc(e).get().then((function(e){e.exists&&(console.log("TOOT"),localStorage.setItem("saved_title",JSON.stringify(e.data().title)),localStorage.setItem("saved_description",JSON.stringify(e.data().description)),localStorage.setItem("saved_start_date",JSON.stringify(e.data().startDate)),localStorage.setItem("saved_end_date",JSON.stringify(e.data().endDate)))})),a.setState({editingEvent:!0,idOfEditEvent:e},a.setAdd())},a.cancelEvent=function(){a.setHomePage()},a.setAdd=function(){a.setState({homePage:!1})},a.setHomePage=function(){a.setState({homePage:!0,editingEvent:!1,idOfEditEvent:""})},a.state={homePage:!0,editingEvent:!1,idOfEditEvent:"",joinEvent:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.joinEvent?r.a.createElement(vt,{open:!0}):null;return r.a.createElement("div",null,r.a.createElement(ht,null),this.state.homePage&&r.a.createElement(ot,{beginAddEvent:this.beginAddEvent,beginJoinEvent:this.beginJoinEvent,editEvent:this.editEvent,deleteEvent:this.deleteEvent}),!this.state.homePage&&r.a.createElement(me,{cancelEvent:this.cancelEvent,setHomePage:function(){return e.setHomePage()},editingEvent:this.state.editingEvent,idOfEditEvent:this.state.idOfEditEvent}),t)}}]),t}(n.Component),ft=a(118),gt=a.n(ft),bt=a(119),St=a.n(bt),Ot={textAlign:"center"},yt={textAlign:"center",top:"100%",fontSize:"20px",position:"relative"},Ct={signInFlow:"popup",signInOptions:[{provider:ce.a.auth.GoogleAuthProvider.PROVIDER_ID,authMethod:"https://accounts.google.com",clientId:"YOUR_OAUTH_CLIENT_ID"},{provider:ce.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!0}],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){ce.a.auth().onAuthStateChanged((function(e){if(e){a.setState({isSignedIn:!!e});var t=le.collection("users").doc(e.email);t.get().then((function(a){a.exists||t.set({displayName:e.displayName,email:e.email,contacts:[],events:[],polls:[],pictureURL:e.photoURL})})),le.collection("users").doc(e.email).get().then((function(e){e.exists&&a.setState({picURL:e.data().pictureURL})})).catch((function(e){console.log("Error getting document",e)})),localStorage.setItem("currentUser",JSON.stringify(e.email))}}))},a.onClick=function(){ce.a.auth().signOut(),a.setState({isSignedIn:!1}),localStorage.clear()},a.state={isSignedIn:!1,picURL:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:Ot},r.a.createElement("header",null,r.a.createElement("img",{src:gt.a,alt:"Schedule It"}))),this.state.isSignedIn?r.a.createElement("div",{style:yt},r.a.createElement("h3",null,r.a.createElement("img",{src:this.state.picURL,alt:"Profile","vertical-align":"middle",width:"100px",height:"100px","border-radius":"50%"}),r.a.createElement("br",null),"Name:",ce.a.auth().currentUser.displayName,r.a.createElement("br",null),"email: ",ce.a.auth().currentUser.email),r.a.createElement(h.a,{variant:"contained",color:"primary",component:ut.b,to:"/home"},"Go to Home Page"),r.a.createElement("br",null),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){return e.onClick()}},"Sign Out")):r.a.createElement(St.a,{uiCallback:function(e){return e.disableAutoSignIn()},uiConfig:Ct,firebaseAuth:ce.a.auth()}))}}]),t}(n.Component),jt=a(46);var Dt=function(){return r.a.createElement(ut.a,null,r.a.createElement(jt.c,null,r.a.createElement(jt.a,{exact:!0,path:"/"},r.a.createElement(kt,null)),r.a.createElement(jt.a,{exact:!0,path:"/home"},r.a.createElement(Et,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[141,1,2]]]);
//# sourceMappingURL=main.baa773a9.chunk.js.map